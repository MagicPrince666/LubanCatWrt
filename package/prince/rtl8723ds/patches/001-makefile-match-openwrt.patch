Index: rtl8723ds-sdio-master/Makefile
===================================================================
--- rtl8723ds-sdio-master.orig/Makefile
+++ rtl8723ds-sdio-master/Makefile
@@ -1,3 +1,4 @@
+EXTRA_CFLAGS := $(NOSTDINC_FLAGS)
 EXTRA_CFLAGS += -O1
 #EXTRA_CFLAGS += -O3
 #EXTRA_CFLAGS += -Wall
@@ -89,7 +90,8 @@ CONFIG_RTW_SDIO_PM_KEEP_POWER = y
 ###################### MP HW TX MODE FOR VHT #######################
 CONFIG_MP_VHT_HW_TX_MODE = n
 ###################### Platform Related #######################
-CONFIG_PLATFORM_I386_PC = y
+CONFIG_PLATFORM_I386_PC = n
+CONFIG_PLATFORM_GENERAL=y
 CONFIG_PLATFORM_ARM_NV_TK1 = n
 CONFIG_PLATFORM_ANDROID_X86 = n
 CONFIG_PLATFORM_ANDROID_INTEL_X86 = n
@@ -146,10 +148,11 @@ CONFIG_PLATFORM_HISILICON = n
 
 CONFIG_DRVEXT_MODULE = n
 
-SUBARCH := $(shell uname -m | sed -e "s/i.86/i386/; s/ppc.*/powerpc/; s/armv.l/arm/; s/aarch64/arm64/; s/riscv../riscv/;")
-ARCH ?= $(SUBARCH)
+# SUBARCH := $(shell uname -m | sed -e "s/i.86/i386/; s/ppc.*/powerpc/; s/armv.l/arm/; s/aarch64/arm64/; s/riscv../riscv/;")
+# ARCH ?= $(SUBARCH)
+CROSS_COMPILE := $(CROSS_COMPILE)
 
-export TopDIR ?= $(shell pwd)
+export TopDIR ?= $(PKG_BUILD_DIR)
 
 ########### COMMON  #################################
 ifeq ($(CONFIG_GSPI_HCI), y)
@@ -1001,6 +1004,15 @@ MODDESTDIR := /lib/modules/$(KVER)/kerne
 INSTALL_PREFIX :=
 endif
 
+ifeq ($(CONFIG_PLATFORM_GENERAL), y)
+EXTRA_CFLAGS += -DCONFIG_LITTLE_ENDIAN
+EXTRA_CFLAGS += -DCONFIG_IOCTL_CFG80211 -DRTW_USE_CFG80211_STA_EVENT
+KVER := $(KERNELRELEASE)
+KSRC := $(LINUX_DIR)
+MODDESTDIR := $(LINUX_DIR)
+INSTALL_PREFIX :=
+endif
+
 ifeq ($(CONFIG_PLATFORM_ACTIONS_ATM702X), y)
 EXTRA_CFLAGS += -DCONFIG_LITTLE_ENDIAN -DCONFIG_PLATFORM_ANDROID -DCONFIG_PLATFORM_ACTIONS_ATM702X
 #ARCH := arm
